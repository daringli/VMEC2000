{% set data = load_setup_py_data(setup_file='../setup.py', from_recipe_dir=True) %}

package:
  name: vmec
  version: {{ data.get('version') }}

source:
  path: ..

build:
  include_recipe: False
  # skip: "true # [win, py<37]"
  number: 0
  # script: python -m pip install . -vvv

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - {{ compiler('fortran') }}
    - {{ mpi }}
    - cmake
    - ninja
    - numpy >=1.19
    - f90wrap
    - hdf5
    - netcdf-fortran
    - mkl
    - python
    - scikit-build

  host:
    - python
    - pip
    - numpy >=1.19
    - f90wrap
    - {{ mpi }}
    - scikit-build

  run:
    - python
    - numpy >=1.19
    - f90wrap
    - {{ mpi }}
    - hdf5
    - netcdf-fortran
    - mkl
    - scikit-build

test:
  commands:
    - python -c "import vmec; print('success')"

about:
  home: {{ data.get('url') }}
  summary: Python extension for VMEC
  # license: LGPL
  # license_file: ["COPYING", "COPYING.LESSER"]
  # description:
  # doc_url: https://simsopt.readthedocs.io/
  dev_url: {{ data.get('url') }}

extra:
  recipe-maintainers:
    - mbkumar
    - landreman
